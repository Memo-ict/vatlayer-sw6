/*! For license information please see memo-postcode-plugin.js.LICENSE */
(window.webpackJsonp=window.webpackJsonp||[]).push([["memo-postcode-plugin"],{"0Dky":function(e,t,n){"use strict";n.r(t),function(e){var t=n("k8s9"),s=s||{};(function(){var e=window.document,t=new WeakMap,n=Object.create(null,{context:{value:"nld",writable:!0},autocompleteUrl:{writable:!0},addressDetailsUrl:{writable:!0},tags:{value:{"unvalidated-housenumber":"(unknown house number)","unvalidated-housenumber-addition":"(unknown house number addition)"},writable:!0},cssPrefix:{value:"postcodenl-autocomplete-",writable:!0},minLength:{value:1,writable:!0},delay:{value:300,writable:!0},appendTo:{value:e.body,writable:!0},autoFocus:{value:!1,writable:!0},autoSelect:{value:!1,writable:!0},autoResize:{value:!0,writable:!0},getResponseMessage:{value:function(e){var t;return t=e>1?e+" address suggestions available. ":"One address suggestion available. ",t+="Use up and down arrow keys to navigate."},writable:!0}}),s=function(n){var s,o,i,a=this,l=e.createElement("ul"),r=e.createElement("div"),c={menuOpen:n.cssPrefix+"menu-open",itemFocus:n.cssPrefix+"item-focus"},u=function(e,n){if(0!==l.children.length){var a=e?l.firstElementChild:l.lastElementChild,r=e?l.lastElementChild:l.firstElementChild;if(void 0===n&&(n=!0),d(),null===m)m=a;else{if(m===r)return m=null,s.value=o,void(t.get(s).context=i);m=(e?m.nextElementSibling:m.previousElementSibling)||a}m.classList.add(c.itemFocus),l.scrollTop>m.offsetTop?l.scrollTop=m.offsetTop:m.offsetHeight+m.offsetTop>l.clientHeight&&(l.scrollTop=m.offsetHeight+m.offsetTop-l.clientHeight);var u=t.get(m);n&&!0===s.dispatchEvent(new CustomEvent("autocomplete-focus",{detail:u,cancelable:!0}))&&(s.value=u.value,t.get(s).context=u.context)}},d=function(){null!==m&&m.classList.remove(c.itemFocus)},p=function(e){v&&e.target!==s&&!r.contains(e.target)&&a.close()},f=function(){v&&a.close()},v=!1,h=!1,m=null;Object.defineProperties(this,{isOpen:{get:function(){return v}},isMousedown:{get:function(){return h}},hasFocus:{get:function(){return null!==m}}}),r.classList.add(n.cssPrefix+"menu"),l.classList.add(n.cssPrefix+"menu-items"),r.appendChild(l),l.addEventListener("mouseover",(function(e){if(e.target!==l){d();for(var t=e.target;t.parentElement!==l;)t=t.parentElement;(m=t).classList.add(c.itemFocus)}})),l.addEventListener("mouseout",(function(){d(),m=null})),r.addEventListener("mousedown",(function(){h=!0})),r.addEventListener("click",(function(e){e.preventDefault(),null!==m&&a.select(),window.setTimeout((function(){h=!1}))})),HTMLElement.prototype.isPrototypeOf(n.appendTo)?n.appendTo.appendChild(r):(e.querySelector(n.appendTo)||e.body).appendChild(r),this.setItems=function(e,n){l.innerHTML="",l.scrollTop=0;for(var s,o,i=0;o=e[i++];)s=n(l,o),t.set(s,o);m=null},this.open=function(e){o=(s=e).value,i=t.get(s).context,n.autoFocus&&null===m&&this.focusNext(!1),v||(!function(e){var t=e.getBoundingClientRect();r.style.top=t.bottom+(window.scrollY||window.pageYOffset)+"px",r.style.left=t.left+(window.scrollX||window.pageXOffset)+"px",n.autoResize&&(r.style.width=t.width+"px")}(s),r.classList.add(c.menuOpen),l.scrollTop=0,v=!0,s.dispatchEvent(new CustomEvent("autocomplete-open")))},this.close=function(e){v&&(e&&(s.value=o,t.get(s).context=i),d(),m=null,r.classList.remove(c.menuOpen),v=!1,s.dispatchEvent(new CustomEvent("autocomplete-close")))},this.focusPrevious=u.bind(this,!1),this.focusNext=u.bind(this,!0),this.select=function(){var e=t.get(m);!0===s.dispatchEvent(new CustomEvent("autocomplete-select",{detail:e,cancelable:!0}))&&(s.value=e.value),s.focus()},this.clear=function(){d(),m=null,l.innerHTML=""},this.destroy=function(){return null!==r.parentNode&&(r.parentNode.removeChild(r),e.removeEventListener("click",p),window.removeEventListener("resize",f),!0)},e.addEventListener("click",p),window.addEventListener("resize",f)};this.AutocompleteAddress=function(l,r){var c,u;if("string"==typeof l)u=l,c=e.querySelectorAll(u);else if(HTMLElement.prototype.isPrototypeOf(l))c=[l];else{if(!NodeList.prototype.isPrototypeOf(l))throw new TypeError("Element(s) or selector has invalid type. Use HTMLElement, NodeList or valid CSS selector string.");c=l}if(0!==c.length){r=a(Object.create(n),r),Object.defineProperty(this,"options",{get:function(){return r}});var d=null,p=null,f=null,v=[],h=this,m=new s(r),g=r.cssPrefix+"address-input-blank",w=e.createElement("div");w.id=i("aria-live-region"),w.setAttribute("aria-role","status"),w.setAttribute("aria-live","assertive"),w.classList.add(r.cssPrefix+w.id),e.body.appendChild(w),this.announce=function(e){w.innerHTML="<div>"+e+"</div>"},this.xhrGet=function(e,t){var n=new XMLHttpRequest;return n.addEventListener("load",(function(){200===this.status&&t.call(this,JSON.parse(n.response))})),n.open("GET",e),n.setRequestHeader("X-Autocomplete-Session",o()),n.send(),n},this.getSuggestions=function(e,t,n){return this.xhrGet(this.options.autocompleteUrl+"/"+encodeURIComponent(e)+"/"+encodeURIComponent(t),n)},this.getDetails=function(e){var t=null,n=arguments[1],s=[e];return 3===arguments.length&&(t=arguments[1],n=arguments[2],s.push(t)),this.xhrGet(this.options.addressDetailsUrl+"/"+s.join("/"),n)},this.renderItem=function(t,n){var s=e.createElement("li"),o=e.createElement("span");if(s.classList.add(this.options.cssPrefix+"item"),o.classList.add(this.options.cssPrefix+"item-label"),o.innerHTML=this.highlight(n.label,n.highlights),s.appendChild(o),"Address"!==n.precision&&s.classList.add(this.options.cssPrefix+"item-more"),n.description){var i=e.createElement("span");i.textContent=n.description,i.classList.add(this.options.cssPrefix+"item-description"),s.appendChild(i)}if(n.tags)for(var a,l=0;a=n.tags[l++];){var r=e.createElement("em");r.textContent=this.options.tags[a],r.classList.add(this.options.cssPrefix+"item-tag"),s.appendChild(r)}return t.appendChild(s),s},this.highlight=function(e,t){if(0===t.length)return e;for(var n,s=0,o=0,i=0,a=[];n=t[s++];)a.push(e.slice(i,n[0])),o=n[0],i=n[1],a.push("<mark>"+e.slice(o,i)+"</mark>");return a.push(e.slice(i)),a.join("")},this.setCountry=function(e){r.context=e.toLowerCase();for(var n,s=0;n=c[s++];)t.get(n).context=r.context},this.search=function(e,t){void 0!==t&&(e.value=t),e.classList.toggle(g,""===e.value),E(e)},this.reset=function(){p=null,f=null,v=[],m.clear();for(var e,n=0;e=c[n++];){var s=t.get(e);s.context=r.context,s.match={},e.value="",e.classList.add(g)}},this.destroy=function(){if(m.destroy()){e.body.removeChild(w);for(var n,s=0;n=c[s++];){var o=t.get(n);for(var i in o.eventHandlers)n.removeEventListener(i,o.eventHandlers[i]);for(var a in o.initialAttributeValues){var l=o.initialAttributeValues[a];null===l?n.removeAttribute(a):n.setAttribute(a,l)}t.delete(n),n.classList.remove(r.cssPrefix+"address-input",r.cssPrefix+"loading",g)}}},Array.prototype.forEach.call(c,(function(e){var n=Object.create(null),s=!1;t.set(e,{match:{},context:r.context,eventHandlers:n,initialAttributeValues:{spellcheck:e.hasAttribute("spellcheck")?e.getAttribute("spellcheck"):null,autocomplete:e.hasAttribute("autocomplete")?e.getAttribute("autocomplete"):null,"aria-controls":e.hasAttribute("aria-controls")?e.getAttribute("aria-controls"):null}}),e.spellcheck=!1,e.autocomplete="off",e.setAttribute("aria-controls",w.id),e.classList.add(r.cssPrefix+"address-input"),e.classList.toggle(g,""===e.value),e.addEventListener("keydown",n.keydown=function(t){switch(s=!0,t.key){case"ArrowUp":case"Up":m.isOpen?m.focusPrevious():E(e),t.preventDefault();break;case"ArrowDown":case"Down":m.isOpen?m.focusNext():E(e),t.preventDefault();break;case"Escape":case"Esc":m.close(!0);break;case"Tab":m.hasFocus&&(m.select(),t.preventDefault());break;case"Enter":m.hasFocus?(m.select(),t.preventDefault()):m.isOpen&&(m.close(),t.preventDefault());break;default:b(e)}}),e.addEventListener("input",n.input=function(){e.classList.remove(g),s?s=!1:b(e)}),e.addEventListener("focus",n.focus=function(){if(!m.isMousedown){m.open(e);var n=t.get(e);void 0!==n.match.precision&&"Address"===n.match.precision||E(e)}}),e.addEventListener("click",n.click=m.open.bind(m,e)),e.addEventListener("autocomplete-select",n["autocomplete-select"]=function(n){var s=t.get(e);s.match=n.detail,"Address"===n.detail.precision?m.close():(m.open(e),s.context=n.detail.context,window.setTimeout(E,0,e))}),e.addEventListener("blur",n.blur=function(){if(!m.isMousedown){var n=t.get(e);if(window.clearTimeout(d),m.close(),r.autoSelect&&void 0===n.match.context)for(var s,o=0;s=v[o++];)if("Address"===s.precision){e.value=s.value,e.dispatchEvent(new CustomEvent("autocomplete-select",{detail:s}));break}e.classList.toggle(g,""===e.value)}}),e.dispatchEvent(new CustomEvent("autocomplete-create"))}));var b=function(e){window.clearTimeout(d),d=window.setTimeout(E,r.delay,e)},E=function(e){m.open(e);var n=t.get(e);if(e.value.length<r.minLength)return n.context=r.context,void m.clear();if(e.value!==p||n.context!==f){var s=n.context===f&&null!==p&&(0===e.value.indexOf(p)||0===p.indexOf(e.value));if(p=e.value,f=n.context,n.match={},!1!==e.dispatchEvent(new CustomEvent("autocomplete-search",{cancelable:!0}))){e.classList.add(r.cssPrefix+"loading");var o=h.getSuggestions.call(h,n.context,e.value,(function(t){if(!0===e.dispatchEvent(new CustomEvent("autocomplete-response",{detail:t,cancelable:!0}))){if(v=t.matches,s&&0===v.length)return;m.setItems(v,h.renderItem.bind(h)),h.announce(r.getResponseMessage(v.length)),r.autoFocus&&m.focusNext(!1)}})),i=function(t){200!==this.status&&e.dispatchEvent(new CustomEvent("autocomplete-error",{detail:{event:t,request:this}}))};o.addEventListener("error",i),o.addEventListener("load",i),o.addEventListener("loadend",(function(){e.classList.remove(r.cssPrefix+"loading")}))}}}}},Object.defineProperty(this.AutocompleteAddress,"defaults",{get:function(){return n}});var o=function(){var e=new Uint8Array(32),t=[];(window.crypto||window.msCrypto).getRandomValues(e);for(var n=0,s="0123456789abcdef".length;n<32;n++)t.push("0123456789abcdef"[e[n]%s]);var o=t.join("");return function(){return o}}(),i=function(t){for(var n=2,s=t;null!==e.getElementById(s);)s=t+"-"+n,n++;return s},a=function(e,t){for(var n in t)e[n]=t[n];return e};if("function"!=typeof window.CustomEvent){window.CustomEvent=function(t,n){n=n||{bubbles:!1,cancelable:!1,detail:null};var s=e.createEvent("CustomEvent");return s.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),s}}0===window.DOMTokenList.prototype.toggle.length&&(window.DOMTokenList.prototype.toggle=function(e){return arguments.length>1?(this[arguments[1]?"add":"remove"](e),!!arguments[1]):(this[this.contains(e)?"remove":"add"](e),this.contains(e))})}).apply(s),function(e,n){e.fn.PostcodeNl=function(){return this.each((function(){var o,i,a=e(this);if(null!==(o=a.data("address-type"))){var l=e("#"+o+"AutocompleteAddress").first();i=new s.AutocompleteAddress(l[0],{autocompleteUrl:"/api/v1/memo/postcodenl/autocomplete",addressDetailsUrl:"/api/v1/memo/postcodenl/address-details"}),l.on("autocomplete-select",(function(t){console.log(t),"Address"==t.detail.precision&&i.getDetails(t.detail.context,(function(t){console.log(t),e("#"+o+"AddressStreet").val(t.address.street+" "+t.address.building),e("#"+o+"AddressZipcode").val(t.address.postcode),e("#"+o+"AddressCity").val(t.address.locality)}))})),a.client=new t.a(n.accessKey,n.contextToken),a.find(".country-select").on("keyup change",(function(t){a.client.get("/api/v1/memo/postcodenl/country-check/"+e(t.target).val(),(function(t){var n=JSON.parse(t);console.log(a),n.isSupported?(i.setCountry(n.iso3),a.children(".postcodenl_autocomplete").css("display","flex"),a.children(".shopware_default").css("display","none")):(a.children(".postcodenl_autocomplete").css("display","none"),a.children(".shopware_default").css("display","flex")),e("#"+o+"AutocompleteAddress").val(""),e("#"+o+"AddressStreet").val(""),e("#"+o+"AddressZipcode").val(""),e("#"+o+"AddressCity").val(""),console.log(n)}))}))}}))},e(document).ready((function(){e(".component_address_form_fields").PostcodeNl()}))}(e,window)}.call(this,n("UoTJ"))}},[["0Dky","runtime","vendor-node","vendor-shared"]]]);