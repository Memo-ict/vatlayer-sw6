/*! For license information please see postcodenl-plugin.js.LICENSE */
(window.webpackJsonp=window.webpackJsonp||[]).push([["postcodenl-plugin"],{"0Dky":function(e,t,n){"use strict";n.r(t),function(e){var t=n("k8s9");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=o||{};(function(){var e=window.document,t=new WeakMap,n=Object.create(null,{context:{value:"nld",writable:!0},autocompleteUrl:{writable:!0},addressDetailsUrl:{writable:!0},tags:{value:{"unvalidated-housenumber":"(unknown house number)","unvalidated-housenumber-addition":"(unknown house number addition)"},writable:!0},cssPrefix:{value:"postcodenl-autocomplete-",writable:!0},minLength:{value:1,writable:!0},delay:{value:300,writable:!0},appendTo:{value:e.body,writable:!0},autoFocus:{value:!1,writable:!0},autoSelect:{value:!1,writable:!0},autoResize:{value:!0,writable:!0},getResponseMessage:{value:function(e){var t;return t=e>1?e+" address suggestions available. ":"One address suggestion available. ",t+="Use up and down arrow keys to navigate."},writable:!0}}),o=function(n){var s,o,i,a=this,l=e.createElement("ul"),r=e.createElement("div"),c={menuOpen:n.cssPrefix+"menu-open",itemFocus:n.cssPrefix+"item-focus"},u=function(e,n){if(0!==l.children.length){var a=e?l.firstElementChild:l.lastElementChild,r=e?l.lastElementChild:l.firstElementChild;if(void 0===n&&(n=!0),d(),null===m)m=a;else{if(m===r)return m=null,s.value=o,void(t.get(s).context=i);m=(e?m.nextElementSibling:m.previousElementSibling)||a}m.classList.add(c.itemFocus),l.scrollTop>m.offsetTop?l.scrollTop=m.offsetTop:m.offsetHeight+m.offsetTop>l.clientHeight&&(l.scrollTop=m.offsetHeight+m.offsetTop-l.clientHeight);var u=t.get(m);n&&!0===s.dispatchEvent(new CustomEvent("autocomplete-focus",{detail:u,cancelable:!0}))&&(s.value=u.value,t.get(s).context=u.context)}},d=function(){null!==m&&m.classList.remove(c.itemFocus)},p=function(e){v&&e.target!==s&&!r.contains(e.target)&&a.close()},f=function(){v&&a.close()},v=!1,h=!1,m=null;Object.defineProperties(this,{isOpen:{get:function(){return v}},isMousedown:{get:function(){return h}},hasFocus:{get:function(){return null!==m}}}),r.classList.add(n.cssPrefix+"menu"),l.classList.add(n.cssPrefix+"menu-items"),r.appendChild(l),l.addEventListener("mouseover",(function(e){if(e.target!==l){d();for(var t=e.target;t.parentElement!==l;)t=t.parentElement;(m=t).classList.add(c.itemFocus)}})),l.addEventListener("mouseout",(function(){d(),m=null})),r.addEventListener("mousedown",(function(){h=!0})),r.addEventListener("click",(function(e){e.preventDefault(),null!==m&&a.select(),window.setTimeout((function(){h=!1}))})),HTMLElement.prototype.isPrototypeOf(n.appendTo)?n.appendTo.appendChild(r):(e.querySelector(n.appendTo)||e.body).appendChild(r),this.setItems=function(e,n){l.innerHTML="",l.scrollTop=0;for(var s,o,i=0;o=e[i++];)s=n(l,o),t.set(s,o);m=null},this.open=function(e){o=(s=e).value,i=t.get(s).context,n.autoFocus&&null===m&&this.focusNext(!1),v||(!function(e){var t=e.getBoundingClientRect();r.style.top=t.bottom+(window.scrollY||window.pageYOffset)+"px",r.style.left=t.left+(window.scrollX||window.pageXOffset)+"px",n.autoResize&&(r.style.width=t.width+"px")}(s),r.classList.add(c.menuOpen),l.scrollTop=0,v=!0,s.dispatchEvent(new CustomEvent("autocomplete-open")))},this.close=function(e){v&&(e&&(s.value=o,t.get(s).context=i),d(),m=null,r.classList.remove(c.menuOpen),v=!1,s.dispatchEvent(new CustomEvent("autocomplete-close")))},this.focusPrevious=u.bind(this,!1),this.focusNext=u.bind(this,!0),this.select=function(){var e=t.get(m);!0===s.dispatchEvent(new CustomEvent("autocomplete-select",{detail:e,cancelable:!0}))&&(s.value=e.value),s.focus()},this.clear=function(){d(),m=null,l.innerHTML=""},this.destroy=function(){return null!==r.parentNode&&(r.parentNode.removeChild(r),e.removeEventListener("click",p),window.removeEventListener("resize",f),!0)},e.addEventListener("click",p),window.addEventListener("resize",f)};this.AutocompleteAddress=function(r,c){var u,d;if("string"==typeof r)d=r,u=e.querySelectorAll(d);else if(HTMLElement.prototype.isPrototypeOf(r))u=[r];else{if(!NodeList.prototype.isPrototypeOf(r))throw new TypeError("Element(s) or selector has invalid type. Use HTMLElement, NodeList or valid CSS selector string.");u=r}if(0!==u.length){c=l(Object.create(n),c),Object.defineProperty(this,"options",{get:function(){return c}});var p=null,f=null,v=null,h=[],m=this,g=new o(c),w=c.cssPrefix+"address-input-blank",b=e.createElement("div");b.id=a("aria-live-region"),b.setAttribute("aria-role","status"),b.setAttribute("aria-live","assertive"),b.classList.add(c.cssPrefix+b.id),e.body.appendChild(b),this.announce=function(e){b.innerHTML="<div>"+e+"</div>"},this.xhrGet=function(e,t){var n=new XMLHttpRequest;return n.addEventListener("load",(function(){200===this.status&&t.call(this,JSON.parse(n.response))})),n.open("GET",e),n.setRequestHeader("X-Autocomplete-Session",i()),n.send(),n},this.getSuggestions=function(e,t,n){return this.xhrGet(this.options.autocompleteUrl+"/"+encodeURIComponent(e)+"/"+encodeURIComponent(t),n)},this.getDetails=function(e){var t=null,n=arguments[1],s=[e];return 3===arguments.length&&(t=arguments[1],n=arguments[2],s.push(t)),this.xhrGet(this.options.addressDetailsUrl+"/"+s.join("/"),n)},this.renderItem=function(t,n){var s=e.createElement("li"),o=e.createElement("span");if(s.classList.add(this.options.cssPrefix+"item"),o.classList.add(this.options.cssPrefix+"item-label"),o.innerHTML=this.highlight(n.label,n.highlights),s.appendChild(o),"Address"!==n.precision&&s.classList.add(this.options.cssPrefix+"item-more"),n.description){var i=e.createElement("span");i.textContent=n.description,i.classList.add(this.options.cssPrefix+"item-description"),s.appendChild(i)}if(n.tags)for(var a,l=0;a=n.tags[l++];){var r=e.createElement("em");r.textContent=this.options.tags[a],r.classList.add(this.options.cssPrefix+"item-tag"),s.appendChild(r)}return t.appendChild(s),s},this.highlight=function(e,t){if(0===t.length)return e;for(var n,s=0,o=0,i=0,a=[];n=t[s++];)a.push(e.slice(i,n[0])),o=n[0],i=n[1],a.push("<mark>"+e.slice(o,i)+"</mark>");return a.push(e.slice(i)),a.join("")},this.setCountry=function(e){c.context=e.toLowerCase();for(var n,s=0;n=u[s++];)t.get(n).context=c.context},this.search=function(e,t){void 0!==t&&(e.value=t),e.classList.toggle(w,""===e.value),E(e)},this.reset=function(){f=null,v=null,h=[],g.clear();for(var e,n=0;e=u[n++];){var s=t.get(e);s.context=c.context,s.match={},e.value="",e.classList.add(w)}},this.destroy=function(){if(g.destroy()){e.body.removeChild(b);for(var n,o=0;n=u[o++];){var i=t.get(n);for(var a in i.eventHandlers)console.log(s(a),a),n.removeEventListener(a,i.eventHandlers[a]);for(var l in i.initialAttributeValues){var r=i.initialAttributeValues[l];null===r?n.removeAttribute(l):n.setAttribute(l,r)}t.delete(n),n.classList.remove(c.cssPrefix+"address-input",c.cssPrefix+"loading",w)}}},Array.prototype.forEach.call(u,(function(e){var n=Object.create(null),s=!1;t.set(e,{match:{},context:c.context,eventHandlers:n,initialAttributeValues:{spellcheck:e.hasAttribute("spellcheck")?e.getAttribute("spellcheck"):null,autocomplete:e.hasAttribute("autocomplete")?e.getAttribute("autocomplete"):null,"aria-controls":e.hasAttribute("aria-controls")?e.getAttribute("aria-controls"):null}}),e.spellcheck=!1,e.autocomplete="off",e.setAttribute("aria-controls",b.id),e.classList.add(c.cssPrefix+"address-input"),e.classList.toggle(w,""===e.value),e.addEventListener("keydown",n.keydown=function(t){switch(s=!0,t.key){case"ArrowUp":case"Up":g.isOpen?g.focusPrevious():E(e),t.preventDefault();break;case"ArrowDown":case"Down":g.isOpen?g.focusNext():E(e),t.preventDefault();break;case"Escape":case"Esc":g.close(!0);break;case"Tab":g.hasFocus&&(g.select(),t.preventDefault());break;case"Enter":g.hasFocus?(g.select(),t.preventDefault()):g.isOpen&&(g.close(),t.preventDefault());break;default:y(e)}}),e.addEventListener("input",n.input=function(){e.classList.remove(w),s?s=!1:y(e)}),e.addEventListener("focus",n.focus=function(){if(!g.isMousedown){g.open(e);var n=t.get(e);void 0!==n.match.precision&&"Address"===n.match.precision||E(e)}}),e.addEventListener("click",n.click=g.open.bind(g,e)),e.addEventListener("autocomplete-select",n["autocomplete-select"]=function(n){var s=t.get(e);s.match=n.detail,"Address"===n.detail.precision?g.close():(g.open(e),s.context=n.detail.context,window.setTimeout(E,0,e))}),e.addEventListener("blur",n.blur=function(){if(!g.isMousedown){var n=t.get(e);if(window.clearTimeout(p),g.close(),c.autoSelect&&void 0===n.match.context)for(var s,o=0;s=h[o++];)if("Address"===s.precision){e.value=s.value,e.dispatchEvent(new CustomEvent("autocomplete-select",{detail:s}));break}e.classList.toggle(w,""===e.value)}}),e.dispatchEvent(new CustomEvent("autocomplete-create"))}));var y=function(e){window.clearTimeout(p),p=window.setTimeout(E,c.delay,e)},E=function(e){g.open(e);var n=t.get(e);if(e.value.length<c.minLength)return n.context=c.context,void g.clear();if(e.value!==f||n.context!==v){var s=n.context===v&&null!==f&&(0===e.value.indexOf(f)||0===f.indexOf(e.value));if(f=e.value,v=n.context,n.match={},!1!==e.dispatchEvent(new CustomEvent("autocomplete-search",{cancelable:!0}))){e.classList.add(c.cssPrefix+"loading");var o=m.getSuggestions.call(m,n.context,e.value,(function(t){if(!0===e.dispatchEvent(new CustomEvent("autocomplete-response",{detail:t,cancelable:!0}))){if(h=t.matches,s&&0===h.length)return;g.setItems(h,m.renderItem.bind(m)),m.announce(c.getResponseMessage(h.length)),c.autoFocus&&g.focusNext(!1)}})),i=function(t){200!==this.status&&e.dispatchEvent(new CustomEvent("autocomplete-error",{detail:{event:t,request:this}}))};o.addEventListener("error",i),o.addEventListener("load",i),o.addEventListener("loadend",(function(){e.classList.remove(c.cssPrefix+"loading")}))}}}}},Object.defineProperty(this.AutocompleteAddress,"defaults",{get:function(){return n}});var i=function(){var e=new Uint8Array(32),t=[];(window.crypto||window.msCrypto).getRandomValues(e);for(var n=0,s="0123456789abcdef".length;n<32;n++)t.push("0123456789abcdef"[e[n]%s]);var o=t.join("");return function(){return o}}(),a=function(t){for(var n=2,s=t;null!==e.getElementById(s);)s=t+"-"+n,n++;return s},l=function(e,t){for(var n in t)e[n]=t[n];return e};if("function"!=typeof window.CustomEvent){window.CustomEvent=function(t,n){n=n||{bubbles:!1,cancelable:!1,detail:null};var s=e.createEvent("CustomEvent");return s.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),s}}0===window.DOMTokenList.prototype.toggle.length&&(window.DOMTokenList.prototype.toggle=function(e){return arguments.length>1?(this[arguments[1]?"add":"remove"](e),!!arguments[1]):(this[this.contains(e)?"remove":"add"](e),this.contains(e))})}).apply(o),function(e,n){e.fn.PostcodeNl=function(){return this.each((function(){var s,i,a=e(this);if(null!==(s=a.data("address-type"))){var l=e("#"+s+"AutocompleteAddress").first();i=new o.AutocompleteAddress(l[0],{autocompleteUrl:"/api/v1/memo/postcodenl/autocomplete",addressDetailsUrl:"/api/v1/memo/postcodenl/address-details"}),l.on("autocomplete-select",(function(t){"Address"==t.detail.precision&&i.getDetails(t.detail.context,(function(t){e("#"+s+"AddressStreet").val(t.address.street+" "+t.address.building),e("#"+s+"AddressZipcode").val(t.address.postcode),e("#"+s+"AddressCity").val(t.address.locality)}))})),a.client=new t.a(n.accessKey,n.contextToken),a.find(".country-select").on("keyup change",(function(t){a.client.get("/api/v1/memo/postcodenl/country-check/"+e(t.target).val(),(function(t){var n=JSON.parse(t);n.isSupported?(i.setCountry(n.iso3),a.children(".postcodenl_autocomplete").css("display","flex"),a.children(".shopware_default").css("display","none")):(a.children(".postcodenl_autocomplete").css("display","none"),a.children(".shopware_default").css("display","flex")),e("#"+s+"AutocompleteAddress").val(""),e("#"+s+"AddressStreet").val(""),e("#"+s+"AddressZipcode").val(""),e("#"+s+"AddressCity").val("")}))}))}}))},e(document).ready((function(){e(".component_address_form_fields").PostcodeNl()}))}(e,window)}.call(this,n("UoTJ"))}},[["0Dky","runtime","vendor-node","vendor-shared"]]]);